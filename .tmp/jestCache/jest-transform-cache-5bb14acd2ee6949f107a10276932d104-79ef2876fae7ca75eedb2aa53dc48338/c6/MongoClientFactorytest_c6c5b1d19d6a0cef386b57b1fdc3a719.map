{"file":"C:\\Users\\epatr\\projects\\ExchangeNest-Backend\\tests\\Contexts\\Shared\\infrastructure\\MongoClientFactory.test.ts","mappings":";;;;;;;;;;;AAAA,4HAAyH;AACzH,qCAAsC;AAEtC,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;IAClC,MAAM,OAAO,GAAG,uCAAkB,CAAC;IACnC,IAAI,MAAmB,CAAC;IAExB,UAAU,CAAC,GAAS,EAAE;QACpB,MAAM,GAAG,MAAM,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,iFAAiF,EAAE,CAAC,CAAC;IAC1I,CAAC,CAAA,CAAC,CAAC;IAEH,SAAS,CAAC,GAAS,EAAE;QACnB,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC;IACvB,CAAC,CAAA,CAAC,CAAC;IAEH,EAAE,CAAC,8DAA8D,EAAE,GAAG,EAAE;QACtE,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,qBAAW,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,wEAAwE,EAAE,GAAS,EAAE;QACtF,MAAM,SAAS,GAAG,MAAM,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE,iFAAiF,EAAE,CAAC,CAAC;QAElJ,MAAM,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEnC,MAAM,SAAS,CAAC,KAAK,EAAE,CAAC;IAC1B,CAAC,CAAA,CAAC,CAAC;IAEH,EAAE,CAAC,uCAAuC,EAAE,GAAS,EAAE;QACrD,MAAM,SAAS,GAAG,MAAM,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,iFAAiF,EAAE,CAAC,CAAC;QAEjJ,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE/B,MAAM,SAAS,CAAC,KAAK,EAAE,CAAC;IAC1B,CAAC,CAAA,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Users\\epatr\\projects\\ExchangeNest-Backend\\tests\\Contexts\\Shared\\infrastructure\\MongoClientFactory.test.ts"],"sourcesContent":["import { MongoClientFactory } from '../../../../src/Contexts/Shared/infrastructure/persistence/mongo/MongoClientFactory';\r\nimport { MongoClient } from 'mongodb';\r\n\r\ndescribe('MongoClientFactory', () => {\r\n  const factory = MongoClientFactory;\r\n  let client: MongoClient;\r\n\r\n  beforeEach(async () => {\r\n    client = await factory.createClient('test', { url: 'mongodb+srv://test:test@cluster0.5n3ek.mongodb.net/?retryWrites=true&w=majority' });\r\n  });\r\n\r\n  afterEach(async () => {\r\n    await client.close();\r\n  });\r\n\r\n  it('creates a new client with the connection already established', () => {\r\n    expect(client).toBeInstanceOf(MongoClient);\r\n  });\r\n\r\n  it('creates a new client if it does not exist a client with the given name', async () => {\r\n    const newClient = await factory.createClient('test2', { url: 'mongodb+srv://test:test@cluster0.5n3ek.mongodb.net/?retryWrites=true&w=majority' });\r\n\r\n    expect(newClient).not.toBe(client);\r\n\r\n    await newClient.close();\r\n  });\r\n\r\n  it('returns a client if it already exists', async () => {\r\n    const newClient = await factory.createClient('test', { url: 'mongodb+srv://test:test@cluster0.5n3ek.mongodb.net/?retryWrites=true&w=majority' });\r\n\r\n    expect(newClient).toBe(client);\r\n\r\n    await newClient.close();\r\n  });\r\n});"],"version":3}